<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:fragment="head(title)">
    <title th:text="${title}">Default Title</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.0/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <script th:src="@{/js/script.js}"></script>

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</head>
<body>

    <div th:fragment="menu">
        <div class="user-info" th:if="${username != null}">
            <span th:text="${username}"></span>
        </div>
        <button class="menu-btn" 
                onclick="toggleMenu()" 
                aria-label="Открыть меню"
                aria-expanded="false"
                aria-controls="sideMenu">&#9776;</button>

        <div class="side-menu" id="sideMenu">
            <a href="#" th:href="@{/home}">Home</a>
            <a href="#" th:href="@{/user}">User</a>
            <a href="#" th:href="@{/user/visualization}">Visualization</a>
            <a href="#" th:href="@{/login}">Login</a>
            <a href="#" th:href="@{/register}">Register</a>
            <button type="button" class="side-menu-button" onclick="document.getElementById('logoutForm').submit();">Logout</button>
            <a href="#" th:href="@{/admin/approves}" th:if="${#authorization.expression('hasRole(''ADMIN'')')}">Admin</a>
            <a href="#" th:href="@{/admin/admin-page}" th:if="${#authorization.expression('hasRole(''ADMIN'')')}">Admin Page</a>
            <form id="logoutForm" th:action="@{/logout}" method="post" style="display: none;"></form>
        </div>
    </div>
</body>
</html> 